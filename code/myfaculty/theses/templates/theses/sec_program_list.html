{% extends 'myprofile/page.html' %}

{% block middle %}

  
<script>
    $(document).ready(function() {
      $('#theses_grade').DataTable({
        "lengthChange": false,
        "pageLength": 100,
        "order" : [[ 0, "desc" ]],
      }
      );
    });
    $(document).ready(function() {
      $('#theses_unassigned').DataTable({
        "lengthChange": false,
        "pageLength": 100,
        "order" : [[ 0, "desc" ]],
      }
      );
    });
    $(document).ready(function() {
      $('#theses_assigned').DataTable({
        "lengthChange": false,
        "pageLength": 100,
        "order" : [[ 0, "desc" ]],
      }
      );
    });
  </script>
<div class="row">
  <div class="col">
    <h4> Διπλωματικές/Πτυχιακές: {{ program.title_gr }} </h4>
  </div>
</div>

<div class="row">

  <div class="d-flex justify-content-end">
    <a href="{% url 'theses:sec_create' %}" class="btn btn-primary" >
      + Νέο Θέμα
    </a>
  </div>
</div> 
<br></br>
<h5> Με βαθμολογία </h5>
{% if theses_grade %}
<a href="{% url 'theses:export_graded_program' program.id %}"> Εξαγωγή </a>  
<table id="theses_grade" class="table">
    <thead>
      <tr>
        <th scope="col">Υποβολή</th>        
        <th scope="col">Επιβλέπων</th>
        <th scope="col">Τίτλος</th>
        <th scope="col">Ανάθεση </th>
        <th scope="col">Βαθμός </th>        
        <th></th>
      </tr>
    </thead>    
  </tbody>
  {% for p in theses_grade %}
  <tr>
    <td>
      {{ p.created_date|date:"Y-m-d" }}
    </td>
    
    <td>
      {{ p.supervisor.display_name }}
    </td>
    <td>
      {{ p.title_gr }}
    </td>
    <td>
      {% if p.assigned_to %}
      {{ p.assigned_to.display_name }} ({{ p.assigned_to.user.username }})
      {% endif %}
    </td>
    <td>
        {{ p.grade_avg }}
    </td>
      
    
    <td>
      <a href="{% url 'theses:sec_edit' p.id %}" type="submit" class="btn btn-primary tablebutton"> Επεξεργασία </a>     
    </td>           
      
  </tr>
  {% endfor %}
  </tbody>
  </table>
  {% else %}
  <p>Δεν υπάρχουν εγγραφές σε αυτή την κατηγορία </p>
  {% endif %}
</br></br>
  <h5> Με ανάθεση </h5>
  {% if theses_assigned %}  
  <table id="theses_unassigned" class="table">
      <thead>
        <tr>
          <th scope="col">Υποβολή</th>        
          <th scope="col">Επιβλέπων</th>
          <th scope="col">Τίτλος</th>         
          <th scope="col">Ανάθεση</th>         
          <th></th>
        </tr>
      </thead>    
    </tbody>
    {% for p in theses_assigned %}
    <tr>
      <td>
        {{ p.created_date|date:"Y-m-d" }}
      </td>
      
      <td>
        {{ p.supervisor.display_name }}
      </td>
      <td>
        {{ p.title_gr }}
      </td>
      <td>
        {% if p.assigned_to %}
        {{ p.assigned_to.display_name }} ({{ p.assigned_to.user.username }})
        {% endif %}
      </td>
      
      <td>
        <a href="{% url 'theses:sec_edit' p.id %}" type="submit" class="btn btn-primary tablebutton"> Επεξεργασία </a>     
      </td>           
        
    </tr>
    {% endfor %}
    </tbody>
    </table>
    {% else %}
    <p>Δεν υπάρχουν εγγραφές σε αυτή την κατηγορία </p>
    {% endif %}
  
{% endblock %}
