{% extends 'myprofile/page.html' %}

{% block middle %}

  
<script>
    $(document).ready(function() {
      $('#theses_unassigned').DataTable({
        "lengthChange": false,
        "pageLength": 100,
        "order" : [[ 0, "desc" ]],
      }
      );
    });
    $(document).ready(function() {
      $('#theses_assigned').DataTable({
        "lengthChange": false,
        "pageLength": 100,
        "order" : [[ 0, "desc" ]],
      }
      );
    });
  </script>
<div class="row">
  <div class="col">
    <h3> Διπλωματικές/Πτυχιακές </h3>
  </div>
</div>
<div class="row">
  {% for p in programs %}
  <a href="{% url 'theses:sec_list_program' p.id %}"> {{ p.title_gr }} </a>
  {% endfor %}
</div>
<div class="row">
  <div class="d-flex justify-content-end">
    <a href="{% url 'theses:sec_create' %}" class="btn btn-primary" >
      + Νέο Θέμα
    </a>
  </div>
</div> 
<br></br>
<div class="row">
  <div class="col-lg-3">
    <a href="{% url 'theses:export_non_ga' %}" class="btn btn-primary">Εξαγωγή (Χωρίς Γ.Σ.)</a>
  </div>
</div>
<br></br>
<h5> Με ανάθεση </h5>
{% if theses_assigned %}  
<table id="theses_assigned" class="table">
    <thead>
      <tr>
        <th scope="col">Υποβολή</th>        
        <th scope="col">Επιβλέπων</th>
        <th scope="col">Τίτλος</th>
        <th scope="col">Ανάθεση </th>
        <th></th>
      </tr>
    </thead>    
  </tbody>
  {% for p in theses_assigned %}
  <tr>
    <td>
      {{ p.created_date|date:"Y-m-d" }}
    </td>
    
    <td>
      {{ p.supervisor.display_name }}
    </td>
    <td>
      {{ p.title_gr }}
    </td>
    <td>
      {% if p.assigned_to %}
      {{ p.assigned_to.display_name }} ({{ p.assigned_to.user.username }})
      {% endif %}
    </td>
    
    <td>
      <a href="{% url 'theses:sec_edit' p.id %}" type="submit" class="btn btn-primary tablebutton"> Επεξεργασία </a>     
    </td>           
      
  </tr>
  {% endfor %}
  </tbody>
  </table>
  {% else %}
  <p>Δεν υπάρχουν εγγραφές σε αυτή την κατηγορία </p>
  {% endif %}

  <h5> Χωρίς ανάθεση </h5>
  {% if theses_unassigned %}  
  <table id="theses_unassigned" class="table">
      <thead>
        <tr>
          <th scope="col">Υποβολή</th>        
          <th scope="col">Επιβλέπων</th>
          <th scope="col">Τίτλος</th>         
          <th></th>
        </tr>
      </thead>    
    </tbody>
    {% for p in theses_unassigned %}
    <tr>
      <td>
        {{ p.created_date|date:"Y-m-d" }}
      </td>
      
      <td>
        {{ p.supervisor.display_name }}
      </td>
      <td>
        {{ p.title_gr }}
      </td>
      
      <td>
        <a href="{% url 'theses:sec_edit' p.id %}" type="submit" class="btn btn-primary tablebutton"> Επεξεργασία </a>     
      </td>           
        
    </tr>
    {% endfor %}
    </tbody>
    </table>
    {% else %}
    <p>Δεν υπάρχουν εγγραφές σε αυτή την κατηγορία </p>
    {% endif %}
  
{% endblock %}
